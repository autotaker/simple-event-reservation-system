# 開発プロセス（フローと責任範囲）

## 目的
最近クローズしたIssue/PRの実運用をもとに、開発を「誰が・どの段階で・何に責任を持つか」で整理する。

## Issue詳細化ステップ（着手前）
1. 対象Issueの要件を取得する（タイトル・本文・ラベル・依存関係）
2. 受け入れ条件をCP（チェックポイント）として抽出する
3. 対象範囲/非対象を明確化し、スコープ外実装を防止する
4. 依存Issueの完了状態を確認し、未完了依存があれば着手前にブロックとして共有する
5. デザインタスクと開発タスクを分離してチェックリスト化する
6. 責任境界を定義する
   - デザイナー責任: 導線・状態表現・レスポンシブルールの仕様確定とhandoff明文化
   - 開発責任: handoff準拠実装、既存ロジック整合、テスト更新と検証
   - 共同責任: 予約可否条件・状態優先順位・文言の最終合意
7. Issueコメントへ詳細化結果を反映する
   - 作業管理: コメント内のデザイン/開発チェックリストを使用
   - 完了判定: Issue本文の受け入れ条件のみを唯一の判定基準とする
   - 同一内容のDoD/受け入れ条件チェックリストをコメント側に重複作成しない

## 全体フロー
1. UIUXデザイナーが画面モックを作成し、デザイナーPR（モックPR）を作成する
2. デザイナーPRをレビュー・マージし、UI仕様とトークン方針を `main` に確定する
3. 開発担当者が確定済みモックを基にIssueを実装し、開発者PRを作成する
4. レビュー担当者が開発者PRをレビューし、修正要否を返す
5. 開発担当者が修正し、必要な自動テストを追加・更新する
6. レビュー完了後に開発者PRをマージする
7. QA担当者がマージ後の `main` で受け入れ観点を検証し、Pass/Failを判定する
8. UIUXデザイナーがマージ後の `main` でUXテストを実施する
9. QA結果とUXテスト結果をもとにIssueをクローズ、または再対応に戻す

## ロール別の責任範囲

### UIUXデザイナー
- 対象Issueの画面モックを作成し、デザイナーPRとして提出する
- 画面モックで開発担当者とUI仕様・導線・トークン方針の認識を合わせる
- マージ後の `main` でUXテストを実施し、UX観点の課題をフィードバックする

### 開発担当者
- Issueの受け入れ条件を満たす実装を行う
- ドメインルールをサーバ側で担保する
- 開発責任範囲の自動テストを整備する
  - ドメイン単体テスト
  - API結合テスト
- レビュー指摘に対する修正内容と検証結果をPRで共有する

### レビュー担当者
- 実装差分の妥当性を評価し、修正が必要な論点を明確にする
- 主に以下の観点で不備を検出する
  - 権限・認可
  - データ整合性
  - 並行実行時の安全性
  - 失敗時の状態管理
- 修正後の再レビューを行い、マージ可否を判断する

### QA担当者
- ユーザーストーリー成立を基準に受け入れ判定を行う
- QA責任範囲の自動テストを整備・実行する
  - UI E2E（`frontend/e2e/`）
- マージ後の `main` 上でUI/APIの実動作を確認し、証跡を残す
- 開発責任範囲のテスト不足がある場合はFailとして報告する

## ハンドオフ基準
- UIUXデザイナー → 開発担当者
  - デザイナーPRが `main` にマージされ、画面仕様・導線・トークン方針が確定していること
- 開発担当者 → レビュー担当者
  - 受け入れ条件を満たす実装と、開発責任範囲のテスト結果が提示されていること
- レビュー担当者 → 開発担当者
  - 修正が必要な論点が、影響と期待修正内容つきで提示されていること
- 開発担当者 → QA担当者
  - PRがマージされ、`main` で検証可能な状態であること
- 開発担当者 → UIUXデザイナー
  - PRがマージされ、UXテスト可能な状態であること
- QA担当者 → マージ判断者
  - 受け入れ条件ごとのPass/Failと根拠が提示されていること
- UIUXデザイナー → 開発担当者
  - UXテストで検出した課題の再現条件と改善観点が提示されていること
- QA担当者 → 開発担当者
  - Fail時に再現条件と不足点を返し、次の修正サイクルへ戻せること

## 判定ルール（最小）
- Pass: 受け入れ条件を満たし、ロールごとの責任範囲（QA検証とUXテストを含む）が充足している
- Fail: 受け入れ条件未達、または責任範囲の検証/テストが不足している

## 補足
この文書はフローと責任分担に限定した要約版。詳細な実施手順は以下を参照する。
- `DEVELOPER_GUIDELINE.md`
- `QA_GUIDELINE.md`
