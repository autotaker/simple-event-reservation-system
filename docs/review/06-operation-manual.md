# 操作マニュアル

## 1. 参加者向け

### 1.1 ログイン

1. トップ画面で `ゲストでログイン` を押下
2. `ログイン中: guest-xxxxxxx` が表示されることを確認

![ログイン前画面](../images/manual/01-before-login.png)

### 1.2 キーノート予約

1. `キーノートを予約` を押下
2. `キーノートを予約しました。` と `参加登録: 完了` を確認

### 1.3 通常セッション予約

1. `セッション一覧を取得` で一覧を表示
2. 対象行の `予約する` を押下
3. 予約後に `予約済み` 表示へ変わることを確認
4. 競合時間帯・上限超過時はエラーメッセージを確認

![ログイン後のセッション一覧と予約状態](../images/manual/02-after-login-session-list.png)

### 1.4 マイページ・QR

1. `マイページを更新` を押下
2. 予約一覧が表示されることを確認
3. `受付用QRコード` が表示されることを確認

## 2. 運営向け

### 2.1 ログイン / ログアウト

1. `/admin/auth` で `運用者ID（operatorId）` と `パスワード` を入力してログイン
2. `管理画面へ進む` を押下し `/admin` に遷移
3. ログアウト時は `ログアウトして失効する` を押下（当該トークンのみ失効）

### 2.2 セッション管理

1. `管理一覧を取得` を押下
2. 新規作成フォームでタイトル/開始時刻/トラック/定員を入力して `セッション作成`
3. 一覧行の `編集` から更新フォームを開き `更新`

### 2.3 CSV出力

1. `予約一覧CSVを出力` を押下し `reservations.csv` を保存
2. `チェックインCSVを出力` を押下し `session-checkins.csv` を保存

![運営画面（CSV出力・マイページQR・チェックイン入力欄）](../images/manual/03-admin-csv-mypage-checkin.png)

### 2.4 チェックイン

1. 参加者のQR payloadを `QR payload` 欄に入力
2. イベント受付時は `イベント受付をチェックイン`
3. セッション受付時は対象セッションを選択し `セッションをチェックイン`
4. `チェックイン履歴を更新` で結果を確認

## 3. 代表エラーと対処

| メッセージ | 原因 | 対処 |
| --- | --- | --- |
| 同じ時間帯のセッションは1つまでしか予約できません。 | 同時刻セッションを重複予約しようとした | 既存予約を確認し別時間帯を選択 |
| 通常セッションは最大5件までしか予約できません。 | 通常セッション上限超過 | 不要な予約をキャンセル後に再予約 |
| このセッションは開始30分前を過ぎたため予約できません。 | 締切超過 | 運営へ当日案内を確認 |
| 現在の予約数を下回る定員には変更できません。 | 管理更新時に定員を下げすぎ | 予約数以上の定員を設定 |
| このQRコードでは対象セッションをチェックインできません。 | QR内予約と受付セッションが不一致 | 正しいQR/セッションを選択 |
