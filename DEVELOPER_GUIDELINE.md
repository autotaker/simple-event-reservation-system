# DEVELOPER_GUIDELINE

このリポジトリで実装担当が最低限実施すべき項目を整理したガイドです。

## 1. 着手前チェック

- `AGENTS.md` を確認し、作業ルールを把握する
- 対応Issueの受け入れ条件を箇条書きで分解する
- 依存Issueがある場合は完了状態を確認する
- ローカル起動が必要な場合は `README.md` の「🚀 ローカル開発環境構築」に従う
- UI関連Issueでは、対象IssueのUIUX受け渡し文書（例: `docs/uiux/issue-XX-handoff.md`）と関連レビュー議事録を先に確認し、設計意図を明文化してから実装する

## 2. 実装方針

- 受け入れ条件に直接必要な変更だけを行う
- UI実装はUI/UX担当が作成した `〜Mock` コンポーネントを参照し、実コンポーネントへ置き換える
- 画面導線分離が要件に含まれる場合、ルート単位で画面を分離する（例: `/participant` と `/admin`）。単一コンポーネント内の `v-if` 切り替えだけで完結させない
- `App.vue` はアプリシェル責務（`RouterView` など）に限定し、画面責務は `views/`、再利用UIは `components/`、状態管理/通信は `composables/` へ分離する
- 参加者導線と運営導線で責務が異なるUI/操作は、同一Viewに混在させない
- `〜Mock` で定義された状態の意図を実コンポーネントのストーリーでも再現する
- StorybookのMDXカタログ（設計意図・入力要素の役割・確認観点）を実装内容に合わせて更新する
- デザイントークンの設計方針・命名はUI/UX担当の責務とし、開発担当は合意済みトークンを実装へ適用する
- モックPRで追加されたデザイントークン不足分は、実装PRでも必ず取り込み、ハードコード値へ戻さない
- 実コンポーネントと実ストーリーの準備後、`〜Mock` は原則削除する
- ドメインルールはサーバ側で一貫して強制する
- UIは成功/失敗時の状態を利用者に分かる形で表示する
- エラー時は利用者が次の行動を判断できるメッセージを返す
- 並行アクセスがあり得る処理は排他制御とスレッドセーフ性を考慮する

## 3. テスト方針

- 受け入れ条件ごとに最低1つは自動テストを用意する
- 画面導線分離Issueでは、ルートごとの表示境界テストを追加し、他導線のUIが描画されないことを検証する
- Storybook上で実コンポーネントのストーリーが `〜Mock` の意図を満たすことを確認する
- 開発担当は自動テスト（unit / API / E2E）で仕様担保を行う
- UXテスト（Playwright MCPでの実導線確認）はUI/UX担当の責務として実施し、開発担当は結果に応じて修正する
- 単体テストでロジックの境界条件を検証する
- APIテストでHTTPステータス・レスポンス形式・エラーメッセージを検証する
- 必要に応じてE2Eでユーザー導線の成立を検証する
- 追加した不具合再現ケースは回帰テストとして残す

## 4. PR作成時

- `.github/pull_request_template.md` の見出し・順序を変更しない
- テンプレート項目を空欄にしない（未実施は未実施と明記）
- UI/CSS変更があるPRでは、テンプレートの `仕様準拠チェック（UI/CSS変更がある場合）` を必ず記載し、契約クラス・状態網羅・禁止事項非抵触を確認する
- `関連Issue` に `Closes #<Issue番号>` を必ず記載する
- 実行したテストコマンドと結果を記載する

## 5. コミュニケーション（Issueコメント）

- Issueへの進捗コメントは以下テンプレートを使用する。

```md
## 進捗報告
- 対象Issue: #<番号>
- 作業日時: <YYYY-MM-DD HH:mm JST>
- ステータス: <着手/実装中/レビュー待ち/完了/ブロック中>

### 実施内容
- <実施した変更1>
- <実施した変更2>

### テスト結果
- <コマンド>: <成功/失敗>
- <コマンド>: <成功/失敗>

### 残課題・リスク
- <未対応項目 or なし>

### 次アクション
- <次に行う作業>
```

- ブロックが発生した場合は、同テンプレート内の `ステータス` を `ブロック中` にし、`残課題・リスク` に解除条件を明記する。
- 完了報告時は、関連PRと受け入れ条件の充足状況（完了/未完了）を必ず追記する。

## 6. 完了条件

- 受け入れ条件に未達がない
- 変更範囲に応じたテスト（`backend` / `frontend` / E2E）が成功している
- 変更内容・確認手順・未実施項目がPR上で追跡可能になっている
